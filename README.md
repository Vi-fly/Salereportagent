# B2B Sales Analyst AI System

A sophisticated AI-powered B2B sales analysis system that uses **LangGraph** to analyze customer data and generate intelligent cross-sell and upsell recommendations.

## 🚀 Features

- **LangGraph Pipeline**: Advanced workflow orchestration for complex analysis
- **AI-Powered Analysis**: 5 specialized agents working together
- **Real-time Recommendations**: Cross-sell and upsell opportunities
- **Research Reports**: Comprehensive business reports generated by LLM
- **REST API**: Production-ready FastAPI endpoints
- **Streamlit Dashboard**: Interactive web interface
- **Data Validation**: Robust error handling and data quality checks

## 🏗️ Architecture

### LangGraph Pipeline
The system uses LangGraph to orchestrate 5 specialized agents:

1. **Customer Context Agent** - Extracts customer profile and metrics
2. **Purchase Pattern Agent** - Analyzes industry patterns and missing opportunities
3. **Product Affinity Agent** - Identifies co-purchase patterns and recommendations
4. **Opportunity Scoring Agent** - Scores cross-sell and upsell opportunities
5. **Recommendation Report Agent** - Generates comprehensive research reports

### Data Flow
```
Customer Data → LangGraph Pipeline → 5 Agents → Recommendations + Report
```

## 📁 Project Structure

```
├── main.py                 # FastAPI server with LangGraph integration
├── pipeline.py             # LangGraph workflow definition
├── agents.py               # 5 specialized analysis agents
├── data_loader.py          # CSV data loading with validation
├── app_streamlit.py        # Streamlit dashboard
├── test_api.py             # API testing suite
├── customer_data.csv       # Sample customer data
├── requirements.txt        # Dependencies
├── API_DOCUMENTATION.md    # Complete API documentation
└── README.md              # This file
```

## 🛠️ Installation

1. **Clone the repository**
   ```bash
   git clone <repository-url>
   cd langchain
   ```

2. **Install dependencies**
   ```bash
   pip install -r requirements.txt
   ```

3. **Set up environment variables**
   Create a `.env` file:
   ```env
   GROQ_API_KEY=your_groq_api_key_here
   CSV_PATH=customer_data.csv
   ```

## 🚀 Quick Start

### Start the API Server
```bash
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

### Start the Streamlit Dashboard
```bash
streamlit run app_streamlit.py
```

### Test the API
```bash
python test_api.py
```

## 📊 API Endpoints

- `GET /` - API information and status
- `GET /health` - Health check
- `GET /customers` - List all customers
- `GET /recommendation?customer_id=<id>` - Get AI recommendations
- `POST /reload` - Reload data and pipeline

### Example API Usage
```bash
# Get recommendations for customer C001
curl "http://localhost:8000/recommendation?customer_id=C001"

# Get all customers
curl "http://localhost:8000/customers"
```

## 🤖 Agents Overview

### 1. Customer Context Agent
- Extracts comprehensive customer profile
- Calculates key metrics (total spent, purchase frequency, etc.)
- Handles data validation and error cases

### 2. Purchase Pattern Agent
- Analyzes industry-specific purchase patterns
- Identifies missing opportunities compared to similar customers
- Calculates product frequency metrics

### 3. Product Affinity Agent
- Finds co-purchase patterns across customers
- Generates product recommendations based on affinity
- Calculates confidence scores for recommendations

### 4. Opportunity Scoring Agent
- Scores cross-sell opportunities (new products)
- Scores upsell opportunities (existing products)
- Provides detailed reasoning for each score

### 5. Recommendation Report Agent
- Generates comprehensive research reports using LLM
- Includes executive summary, analysis, and recommendations
- Provides actionable business insights

## 📈 Data Requirements

The system expects CSV data with these columns:
- `Customer_ID` - Unique customer identifier
- `Product` - Product name
- `Total_Price(USD)` - Purchase amount
- `Customer_Name` - Company name
- `Industry` - Industry sector
- `Annual_Revenue(USD)` - Annual revenue
- `Number_of_Employees` - Employee count
- And more...

## 🔧 Configuration

### Environment Variables
- `GROQ_API_KEY` - Required for LLM report generation
- `CSV_PATH` - Path to customer data CSV file

### LangGraph Configuration
The pipeline is configured in `pipeline.py` and can be customized for:
- Different agent workflows
- Custom scoring algorithms
- Additional analysis steps

## 🧪 Testing

### API Testing
```bash
python test_api.py
```

### Manual Testing
```bash
# Test specific customer
curl "http://localhost:8000/recommendation?customer_id=C001"

# Test health endpoint
curl "http://localhost:8000/health"
```

## 📚 Documentation

- **API Documentation**: `API_DOCUMENTATION.md`
- **Interactive Docs**: `http://localhost:8000/docs` (Swagger UI)
- **Agent Details**: See `agents.py` for implementation details

## 🚀 Performance

- **Response Time**: 2-5 seconds per recommendation
- **Scalability**: Handles multiple concurrent requests
- **Caching**: Built-in caching for improved performance
- **Error Handling**: Robust error handling and recovery

## 🔒 Security

- Input validation on all endpoints
- Error message sanitization
- CORS configuration for web integration
- Rate limiting recommendations

## 🤝 Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Test thoroughly
5. Submit a pull request

## 📄 License

This project is licensed under the MIT License.

## 🆘 Support

For issues or questions:
1. Check the server logs
2. Verify your data format
3. Test with the provided test script
4. Review the API documentation

---

**Built with LangGraph, FastAPI, and Streamlit** 🚀 